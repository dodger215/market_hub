<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Realtime Market – Manual WebSocket Tester</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 16px;
      background: #0f172a;
      color: #e5e7eb;
    }
    h1, h2, h3 {
      margin: 0 0 8px;
    }
    h1 {
      margin-bottom: 16px;
    }
    .card {
      background: #020617;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
      border: 1px solid #1f2937;
    }
    label {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: .06em;
      color: #9ca3af;
      display: block;
      margin-bottom: 4px;
    }
    input, select, button {
      font: inherit;
    }
    input, select {
      padding: 6px 8px;
      border-radius: 4px;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      width: 100%;
      box-sizing: border-box;
      margin-bottom: 8px;
    }
    button {
      padding: 6px 10px;
      border-radius: 4px;
      border: none;
      background: #2563eb;
      color: #e5e7eb;
      cursor: pointer;
      font-size: 13px;
      margin-right: 6px;
      margin-top: 4px;
    }
    button.secondary {
      background: #111827;
      border: 1px solid #374151;
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .row > div {
      flex: 1 1 160px;
    }
    #log {
      background: #020617;
      border-radius: 8px;
      padding: 8px;
      border: 1px solid #1f2937;
      height: 260px;
      overflow: auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      white-space: pre-wrap;
    }
    .status {
      font-size: 12px;
      color: #9ca3af;
    }
    .status span {
      font-weight: 600;
    }
    .pill {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 11px;
      background: #111827;
      border: 1px solid #1f2937;
      margin-left: 6px;
    }
  </style>
</head>
<body>
  <h1>Realtime Market – Manual WebSocket Tester</h1>
  <p class="status">
    Socket status:
    <span id="socket-status">disconnected</span>
    <span class="pill">ws://localhost:4000/socket/websocket</span>
  </p>

  <div class="card">
    <h2>1. Connect</h2>
    <div class="row">
      <div>
        <label for="token-input">JWT Token</label>
        <input id="token-input" type="text" placeholder="paste JWT token here" />
      </div>
      <div style="flex:0 0 auto;align-self:flex-end;">
        <button id="connect-btn">Connect</button>
        <button id="disconnect-btn" class="secondary" disabled>Disconnect</button>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>2. Chat Channel – <code>chat:room_&lt;room_id&gt;</code></h2>
    <div class="row">
      <div>
        <label for="chat-room-id">Room ID</label>
        <input id="chat-room-id" placeholder="e.g. abc123" />
      </div>
      <div style="flex:0 0 auto;align-self:flex-end;">
        <button id="chat-join-btn" disabled>Join room</button>
        <button id="chat-leave-btn" class="secondary" disabled>Leave</button>
      </div>
    </div>
    <div class="row">
      <div>
        <label for="chat-message">Send message</label>
        <input id="chat-message" placeholder="Hello from manual tester" />
      </div>
      <div style="flex:0 0 auto;align-self:flex-end;">
        <button id="chat-send-btn" disabled>Send</button>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>3. Feed Channel – <code>feed:user_&lt;user_id&gt;</code></h2>
    <div class="row">
      <div>
        <label for="feed-user-id">User ID</label>
        <input id="feed-user-id" placeholder="e.g. user123 (must match JWT)" />
      </div>
      <div style="flex:0 0 auto;align-self:flex-end;">
        <button id="feed-join-btn" disabled>Join feed</button>
        <button id="feed-leave-btn" class="secondary" disabled>Leave</button>
      </div>
    </div>
    <div class="row">
      <div>
        <label for="feed-product-id">Product ID</label>
        <input id="feed-product-id" placeholder="e.g. prod_123" />
      </div>
      <div style="flex:0 0 auto;align-self:flex-end;">
        <button id="feed-view-btn" disabled>View</button>
        <button id="feed-like-btn" disabled>Like</button>
        <button id="feed-save-btn" disabled>Save</button>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>4. Delivery Channel – <code>delivery:delivery_&lt;delivery_id&gt;</code></h2>
    <div class="row">
      <div>
        <label for="delivery-id">Delivery ID</label>
        <input id="delivery-id" placeholder="e.g. deliv_123" />
      </div>
      <div style="flex:0 0 auto;align-self:flex-end;">
        <button id="delivery-join-btn" disabled>Join delivery</button>
        <button id="delivery-leave-btn" class="secondary" disabled>Leave</button>
      </div>
    </div>
    <div class="row">
      <div>
        <label>Location</label>
        <input id="delivery-lat" placeholder="latitude" />
      </div>
      <div>
        <label>&nbsp;</label>
        <input id="delivery-lng" placeholder="longitude" />
      </div>
      <div style="flex:0 0 auto;align-self:flex-end;">
        <button id="delivery-location-btn" disabled>Send location_update</button>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>Log</h2>
    <pre id="log"></pre>
  </div>

  <script src="client.js"></script>
</body>
</html>


